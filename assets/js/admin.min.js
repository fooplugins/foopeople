"use strict";jQuery(document).ready(function(i){i.admin_tabs={init:function(){return i("a.nav-tab").click(function(e){var t=i(this);e.preventDefault(),t.parents(".nav-tab-wrapper:first").find(".nav-tab-active").removeClass("nav-tab-active"),t.addClass("nav-tab-active"),i(".nav-container:visible").hide();var a=t.attr("href");i(a+"_tab").show();var n=i("input[name=_wp_http_referer]").val();0<=n.indexOf("#")&&(n=n.substr(0,n.indexOf("#"))),n+=a,window.location.hash=a,i("input[name=_wp_http_referer]").val(n)}),window.location.hash&&i('a.nav-tab[href="'+window.location.hash+'"]').click(),!1}},i.admin_tabs.init()}),function(e,p){e.bindSettingsAjaxButtons=function(){p(".foopeople_settings_ajax").click(function(e){var t=p(this),a=t.parents(".foopeople_settings_ajax_container:first"),n=a.find(".spinner"),i=t.data("response"),o=t.data("confirm"),s=!0,l="action="+t.data("action")+"&_wpnonce="+t.data("nonce")+"&_wp_http_referer="+encodeURIComponent(p('input[name="_wp_http_referer"]').val());e.preventDefault(),o&&(s=confirm(o)),s&&(n.addClass("is-active"),t.prop("disabled",!0),p.ajax({type:"POST",url:ajaxurl,data:l,success:function(e){"replace_container"===i?a.html(e):"alert"===i&&alert(e)},complete:function(){n.removeClass("is-active"),t.prop("disabled",!1)}}))})},p(function(){e.bindSettingsAjaxButtons()})}(window.FOOPEOPLE=window.FOOPEOPLE||{},jQuery),function(n,i){n.updateCache=function(){n.cache={$textFields:i("#foopeople-person-details input[name^='foopeople-person-details']"),$selectFields:i("#foopeople-person-details select[name^='foopeople-person-details']"),$nodes:i("[data-pace-people-value]"),$portrait:i("#set-post-thumbnail"),$removePortrait:i("#remove-post-thumbnail"),portraitDefault:i("#ppl__portrait_thumbnail").data("defaultSrc")}},n.updatePortrait=function(){var e=n.cache.$portrait.children("img");0<e.length&&i("#ppl__portrait_thumbnail").attr("src",e.attr("src"))},n.updateSelectValues=function(){n.selectFields={locations:[],team:[],role:[]},n.cache.$selectFields.each(function(){var e=i(this),t=e.attr("name"),a=(e.val(),"");switch(e.find("option:selected").each(function(){a+=i(this).text()+" "}),t){case"foopeople-person-details[location][]":n.selectFields.locations.push(a);break;case"foopeople-person-details[role][]":n.selectFields.role.push(a);break;case"foopeople-person-details[team][]":n.selectFields.team.push(a)}})},n.updateTextboxValues=function(){n.textFields={firstname:[],surname:[],preferred:[],jobtitle:[],phonenumber:[],email:[]},n.cache.$textFields.each(function(){var e=i(this),t=e.attr("name"),a=e.val();switch(t){case"foopeople-person-details[firstname]":n.textFields.firstname.push(a);break;case"foopeople-person-details[surname]":n.textFields.surname.push(a);break;case"foopeople-person-details[preferred]":n.textFields.preferred.push(a);break;case"foopeople-person-details[jobtitle]":n.textFields.jobtitle.push(a);break;case"foopeople-person-details[workmobile]":n.textFields.phonenumber.push(a);break;case"foopeople-person-details[workemail]":n.textFields.email.push(a)}}),n.updateTitleValue()},n.updateHTMLValues=function(e){i.each(e,function(a,e){var n="",t=i('[data-pace-people-value="'+a+'"]');0!==e.length?i(e).each(function(e,t){console.log(a,t),"preferred"===a&&0<t.length&&(t="("+t+")"),n+='<span class="ppl__item_delimiter">'+t+"</span> "}):n='<span class="ppl__item_delimiter ppl_text_captitalize">'+a+"</span> ",t.html(n)})},n.updateTitleValue=function(){i("#post_name").val(""),i("#title").val(n.textFields.firstname+" "+n.textFields.surname)},n.showPreview=function(){i("#post-ppl-preview").removeClass("js-ppl__loading")},n.setThumbnailFromAjax=function(e,t,a){"string"==typeof a.data&&/action=get-post-thumbnail-html/.test(a.data)&&t.responseJSON&&"string"==typeof t.responseJSON.data&&(n.updateCache(),n.updatePortrait(),n.bindEvents())},n.bindEvents=function(){n.cache.$removePortrait.on("click",function(){i("#ppl__portrait_thumbnail").attr("src",n.cache.portraitDefault)}),n.cache.$selectFields.on("change",function(){n.updateSelectValues(),n.updateHTMLValues(n.selectFields)}),n.cache.$textFields.on("input",function(){n.updateTextboxValues(),n.updateHTMLValues(n.textFields)}),i(document).ajaxComplete(function(e,t,a){n.setThumbnailFromAjax(e,t,a)})},i(function(){n.updateCache(),n.updatePortrait(),n.bindEvents(),n.updateTextboxValues(),n.updateSelectValues(),n.updateHTMLValues(n.textFields),n.updateHTMLValues(n.selectFields),n.updateTitleValue(),n.showPreview()})}(window.FOOPEOPLE=window.FOOPEOPLE||{},jQuery);