"use strict";!function(t,f){t.moveTaxonomyBoxes=function(){var e=t.getTaxonomyMetaBoxes();f.each(e,function(e,t){f(t.metabox).detach().appendTo('.foometafields-content[data-name="'+t.panel+'"]')})},t.getTaxonomyMetaBoxes=function(){var t=[];return f("#poststuff").find(".foometafields-tab[data-taxonomy]").each(function(){var e=f(this).data();t.push({panel:e.name,metabox:"#"+e.taxonomy})}),t},t.bindTabEvents=function(){f("#poststuff").on("click",".foometafields-tab,.foometafields-child-tab",function(e){e.preventDefault(),e.stopPropagation();var t=f(this),a='[data-name="'+t.data("name")+'"]',o=t.closest(".foometafields-container"),i=o.find(".foometafields-contents").find(a),s=t.closest(".foometafields-tab"),n=s.find(a);o.find(".foometafields-active").removeClass("foometafields-active"),s.add(n).add(i).addClass("foometafields-active")})},t.movePortraitBox=function(){f("#poststuff").find(".foometafields-content[data-feature-image]").each(function(){f("#postimagediv").removeClass("closed").detach().appendTo(this)})},t.setupAutoSuggestFields=function(){f("#poststuff").find("input[data-suggest]").each(function(){f(this).suggest(window.ajaxurl+"?"+f(this).data("suggest-query"),{multiple:f(this).data("suggest-multiple"),multipleSep:f(this).data("suggest-separator")})})},t.setupSelectizeFields=function(){f("#poststuff").find("[data-selectize-instance]").each(function(){var a=f(this),o=f("#"+a.data("selectize-display"));a.selectize({valueField:"id",labelField:"text",searchField:"text",maxItems:1,options:[],create:!1,onChange:function(e){var t=a[0].selectize.getItem(e);o.val(t.text())},load:function(e,t){if(!e.length)return t();f.ajax({url:window.ajaxurl+"?"+a.data("selectize-query"),type:"GET",data:{q:e},error:function(){t()},success:function(e){console.log(e.results),t(e.results)}})}})})},t.setupColorpickerFields=function(){f("#poststuff input[data-wp-color-picker]").wpColorPicker()},t.setupRepeaterFields=function(){f("#poststuff .foometafields-repeater-add").click(function(e){var t=f(this).parents(".foometafields-repeater:first"),a=t.find("table:first"),o=a.find("tfoot tr").clone();e.preventDefault(),e.stopPropagation(),o.find(":input").removeAttr("disabled"),a.find("tbody").append(o),t.removeClass("foometafields-repeater-empty")}),f("#poststuff .foometafields-repeater").on("click",".foometafields-repeater-delete",function(e){var t=f(this),a=t.data("confirm"),o=t.parents("tr:first");e.preventDefault(),e.stopPropagation(),a&&confirm(a)&&o.remove()})},f(function(){t.moveTaxonomyBoxes(),t.movePortraitBox(),t.bindTabEvents(),t.setupAutoSuggestFields(),t.setupSelectizeFields(),t.setupColorpickerFields(),t.setupRepeaterFields()})}(window.FOOMETAFIELDS=window.FOOMETAFIELDS||{},jQuery);